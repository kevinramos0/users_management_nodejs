"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isBefore = void 0;

var _utils = require("./utils");

const isBefore = _ref => {
  let {
    parser
  } = _ref;
  return {
    type: 'string',
    compile: arg => {
      const against = (0, _utils.parseOrThrow)(arg, parser);

      const validator = subject => {
        const createError = (0, _utils.createErrorCreator)(validator);
        return (0, _utils.parse)(subject, parser, createError, parsed => {
          if (parsed < against) return true;
          createError({
            message: `Date must be before ${arg}`
          });
        });
      };

      return validator;
    }
  };
};

exports.isBefore = isBefore;