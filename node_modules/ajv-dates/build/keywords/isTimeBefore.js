"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isTimeBefore = void 0;

var _utils = require("./utils");

const isTimeBefore = _ref => {
  let {
    parser
  } = _ref;
  return {
    type: 'string',
    compile: arg => {
      const against = (0, _utils.parseOrThrow)(arg, parser);

      const validator = subject => {
        const createError = (0, _utils.createErrorCreator)(validator);
        return (0, _utils.parse)(subject, parser, createError, parsed => {
          const actualAgainst = (0, _utils.cloneDate)(parsed, against.getHours(), against.getMinutes(), against.getSeconds(), against.getMilliseconds());
          if (parsed < actualAgainst) return true;
          createError({
            message: `Time must be before ${arg}`
          });
        });
      };

      return validator;
    }
  };
};

exports.isTimeBefore = isTimeBefore;