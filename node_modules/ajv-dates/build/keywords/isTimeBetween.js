"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isTimeBetween = void 0;

var _utils = require("./utils");

const isTimeBetween = _ref => {
  let {
    parser
  } = _ref;
  return {
    type: 'string',
    schemaType: 'array',
    compile: _ref2 => {
      let [lower, upper] = _ref2;
      const dLower = (0, _utils.parseOrThrow)(lower, parser);
      const dUpper = (0, _utils.parseOrThrow)(upper, parser);

      const validator = subject => {
        const createError = (0, _utils.createErrorCreator)(validator);
        return (0, _utils.parse)(subject, parser, createError, parsed => {
          const actualUpper = (0, _utils.cloneDate)(parsed, dUpper.getHours(), dUpper.getMinutes(), dUpper.getSeconds(), dUpper.getMilliseconds());
          const actualLower = (0, _utils.cloneDate)(parsed, dLower.getHours(), dLower.getMinutes(), dLower.getSeconds(), dLower.getMilliseconds());
          if (actualLower < parsed && parsed < actualUpper) return true;
          createError({
            message: `Time must be between ${lower} and ${upper}`
          });
        });
      };

      return validator;
    }
  };
};

exports.isTimeBetween = isTimeBetween;